import 'vs/css!./media/searchviewlet';
import { TPromise } from 'vs/base/common/winjs.base';
import URI from 'vs/base/common/uri';
import { IAction } from 'vs/base/common/actions';
import { Dimension, Builder } from 'vs/base/browser/builder';
import { ITree } from 'vs/base/parts/tree/browser/tree';
import { IPreferencesService } from 'vs/workbench/parts/preferences/common/preferences';
import { IEditorGroupService } from 'vs/workbench/services/group/common/groupService';
import { IFileService } from 'vs/platform/files/common/files';
import { Viewlet } from 'vs/workbench/browser/viewlet';
import { FileMatchOrMatch, ISearchWorkbenchService } from 'vs/workbench/parts/search/common/searchModel';
import { IWorkbenchEditorService } from 'vs/workbench/services/editor/common/editorService';
import { IStorageService } from 'vs/platform/storage/common/storage';
import { IConfigurationService } from 'vs/platform/configuration/common/configuration';
import { IContextViewService } from 'vs/platform/contextview/browser/contextView';
import { IInstantiationService } from 'vs/platform/instantiation/common/instantiation';
import { IMessageService } from 'vs/platform/message/common/message';
import { IProgressService } from 'vs/platform/progress/common/progress';
import { IWorkspaceContextService } from 'vs/platform/workspace/common/workspace';
import { IContextKeyService } from 'vs/platform/contextkey/common/contextkey';
import { ITelemetryService } from 'vs/platform/telemetry/common/telemetry';
import { PatternInputWidget } from 'vs/workbench/parts/search/browser/patternInputWidget';
import { SearchWidget } from 'vs/workbench/parts/search/browser/searchWidget';
import { IReplaceService } from 'vs/workbench/parts/search/common/replace';
import { IUntitledEditorService } from 'vs/workbench/services/untitled/common/untitledEditorService';
import { IListService } from 'vs/platform/list/browser/listService';
import { IThemeService } from 'vs/platform/theme/common/themeService';
import { IOutputService } from 'vs/workbench/parts/output/common/output';
export declare class SearchViewlet extends Viewlet {
    private fileService;
    private editorService;
    private editorGroupService;
    private progressService;
    private messageService;
    private storageService;
    private contextViewService;
    private instantiationService;
    private configurationService;
    private contextService;
    private searchWorkbenchService;
    private contextKeyService;
    private replaceService;
    private untitledEditorService;
    private preferencesService;
    private listService;
    protected themeService: IThemeService;
    private outputService;
    private static MAX_TEXT_RESULTS;
    private static SHOW_REPLACE_STORAGE_KEY;
    private isDisposed;
    private loading;
    private queryBuilder;
    private viewModel;
    private callOnModelChange;
    private viewletVisible;
    private inputBoxFocused;
    private inputPatternIncludesFocused;
    private inputPatternExclusionsFocused;
    private firstMatchFocused;
    private fileMatchOrMatchFocused;
    private fileMatchFocused;
    private matchFocused;
    private actionRegistry;
    private tree;
    private viewletSettings;
    private domNode;
    private messages;
    private searchWidgetsContainer;
    private searchWidget;
    private size;
    private queryDetails;
    private inputPatternExcludes;
    private inputPatternIncludes;
    private results;
    private currentSelectedFileMatch;
    private selectCurrentMatchEmitter;
    private delayedRefresh;
    constructor(telemetryService: ITelemetryService, fileService: IFileService, editorService: IWorkbenchEditorService, editorGroupService: IEditorGroupService, progressService: IProgressService, messageService: IMessageService, storageService: IStorageService, contextViewService: IContextViewService, instantiationService: IInstantiationService, configurationService: IConfigurationService, contextService: IWorkspaceContextService, searchWorkbenchService: ISearchWorkbenchService, contextKeyService: IContextKeyService, replaceService: IReplaceService, untitledEditorService: IUntitledEditorService, preferencesService: IPreferencesService, listService: IListService, themeService: IThemeService, outputService: IOutputService);
    create(parent: Builder): TPromise<void>;
    readonly searchAndReplaceWidget: SearchWidget;
    readonly searchIncludePattern: PatternInputWidget;
    readonly searchExcludePattern: PatternInputWidget;
    private createSearchWidget(builder);
    private trackInputBox(inputFocusTracker, contextKey?);
    private onReplaceToggled();
    private onSearchResultsChanged(event?);
    private refreshTree(event?);
    private replaceAll();
    private buildAfterReplaceAllMessage(occurrences, fileCount, replaceValue?);
    private buildReplaceAllConfirmationMessage(occurrences, fileCount, replaceValue?);
    private clearMessage();
    private createSearchResultsView(builder);
    selectCurrentMatch(): void;
    selectNextMatch(): void;
    selectPreviousMatch(): void;
    setVisible(visible: boolean): TPromise<void>;
    focus(): void;
    focusNextInputBox(): void;
    private moveFocusFromSearchOrReplace();
    focusPreviousInputBox(): void;
    private moveFocusFromResults();
    private reLayout();
    layout(dimension: Dimension): void;
    getControl(): ITree;
    clearSearchResults(): void;
    cancelSearch(): boolean;
    private selectTreeIfNotSelected();
    private getSearchTextFromEditor();
    private showsFileTypes();
    toggleCaseSensitive(): void;
    toggleWholeWords(): void;
    toggleRegex(): void;
    toggleQueryDetails(moveFocus?: boolean, show?: boolean, skipLayout?: boolean, reverse?: boolean): void;
    searchInFolder(resource: URI): void;
    onQueryChanged(rerunQuery: boolean, preserveFocus?: boolean): void;
    private validateQuery(query);
    private onQueryTriggered(query, excludePatternText, includePatternText);
    private updateSearchResultCount();
    private buildResultCountMessage(resultCount, fileCount);
    private searchWithoutFolderMessage(div);
    private showEmptyStage();
    private onFocus(lineMatch, preserveFocus?, sideBySide?, pinned?);
    open(element: FileMatchOrMatch, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean): TPromise<any>;
    private getSelectionFrom(element);
    private onUntitledDidChangeDirty(resource);
    private onFilesChanged(e);
    getActions(): IAction[];
    shutdown(): void;
    dispose(): void;
}
